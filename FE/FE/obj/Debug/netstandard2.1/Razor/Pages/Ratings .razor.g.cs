#pragma checksum "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "42a13add88b39fc279dce586524728158b964598"
// <auto-generated/>
#pragma warning disable 1591
namespace FE.Pages
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Components;
#nullable restore
#line 1 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\_Imports.razor"
using System.Net.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\_Imports.razor"
using System.Net.Http.Json;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\_Imports.razor"
using Microsoft.AspNetCore.Components.Forms;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\_Imports.razor"
using Microsoft.AspNetCore.Components.Routing;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\_Imports.razor"
using Microsoft.AspNetCore.Components.Web;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\_Imports.razor"
using Microsoft.AspNetCore.Components.WebAssembly.Http;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\_Imports.razor"
using Microsoft.JSInterop;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\_Imports.razor"
using FE;

#line default
#line hidden
#nullable disable
#nullable restore
#line 9 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\_Imports.razor"
using FE.Shared;

#line default
#line hidden
#nullable disable
#nullable restore
#line 10 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\_Imports.razor"
using BlazorStrap;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
using Blazored.LocalStorage;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
using System.Net.Http.Headers;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
using Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 8 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
using Syncfusion.Blazor.DropDowns;

#line default
#line hidden
#nullable disable
    [Microsoft.AspNetCore.Components.RouteAttribute("/ratings")]
    public partial class Ratings_ : Microsoft.AspNetCore.Components.ComponentBase
    {
        #pragma warning disable 1998
        protected override void BuildRenderTree(Microsoft.AspNetCore.Components.Rendering.RenderTreeBuilder __builder)
        {
            __builder.AddMarkupContent(0, "<head>\r\n    <link rel=\"stylesheet\" type=\"text/css\" href=\"../css/rating2.css\">\r\n</head>\r\n");
            __builder.OpenElement(1, "body");
            __builder.AddMarkupContent(2, "\r\n\r\n    ");
            __builder.OpenElement(3, "div");
            __builder.AddAttribute(4, "class", "container");
            __builder.AddMarkupContent(5, "\r\n        ");
            __builder.OpenElement(6, "div");
            __builder.AddAttribute(7, "class", "row");
            __builder.AddMarkupContent(8, "\r\n            ");
            __builder.OpenElement(9, "div");
            __builder.AddAttribute(10, "class", "col-md-4 rating-sec");
            __builder.AddMarkupContent(11, "\r\n                ");
            __builder.AddMarkupContent(12, "<h2 class=\"text-center\">Rate one of the movies on our site.</h2>\r\n                ");
            __builder.OpenElement(13, "form");
            __builder.AddAttribute(14, "class", "rating-form");
            __builder.AddMarkupContent(15, "\r\n                    ");
            __builder.OpenElement(16, "div");
            __builder.AddAttribute(17, "class", "form-group");
            __builder.AddMarkupContent(18, "\r\n                        ");
            __builder.AddMarkupContent(19, "<label for=\"exampleInputMovieName\" class=\"text-uppercase\">Enter movie Name</label>\r\n                        ");
            __builder.OpenElement(20, "input");
            __builder.AddAttribute(21, "type", "text");
            __builder.AddAttribute(22, "id", "name");
            __builder.AddAttribute(23, "class", "form-control");
            __builder.AddAttribute(24, "placeholder", "Movie name");
            __builder.AddAttribute(25, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 22 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
                                      chosenMovieTitle

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(26, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => chosenMovieTitle = __value, chosenMovieTitle));
            __builder.SetUpdatesAttributeName("value");
            __builder.CloseElement();
            __builder.AddMarkupContent(27, "\r\n                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(28, "\r\n\r\n                    ");
            __builder.OpenElement(29, "div");
            __builder.AddAttribute(30, "class", "rate");
            __builder.AddMarkupContent(31, "\r\n                        ");
            __builder.OpenElement(32, "input");
            __builder.AddAttribute(33, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 26 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
                                         (() => SetChosenRating(10))

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(34, "type", "radio");
            __builder.AddAttribute(35, "id", "star10");
            __builder.AddAttribute(36, "name", "rate");
            __builder.AddAttribute(37, "value", "10");
            __builder.CloseElement();
            __builder.AddMarkupContent(38, "\r\n                        ");
            __builder.AddMarkupContent(39, "<label for=\"star10\" title=\"text\">10 stars</label>\r\n                        ");
            __builder.OpenElement(40, "input");
            __builder.AddAttribute(41, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 28 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
                                         (() => SetChosenRating(9))

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(42, "type", "radio");
            __builder.AddAttribute(43, "id", "star9");
            __builder.AddAttribute(44, "name", "rate");
            __builder.AddAttribute(45, "value", "9");
            __builder.CloseElement();
            __builder.AddMarkupContent(46, "\r\n                        ");
            __builder.AddMarkupContent(47, "<label for=\"star9\" title=\"text\">9 stars</label>\r\n                        ");
            __builder.OpenElement(48, "input");
            __builder.AddAttribute(49, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 30 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
                                         (() => SetChosenRating(8))

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(50, "type", "radio");
            __builder.AddAttribute(51, "id", "star8");
            __builder.AddAttribute(52, "name", "rate");
            __builder.AddAttribute(53, "value", "8");
            __builder.CloseElement();
            __builder.AddMarkupContent(54, "\r\n                        ");
            __builder.AddMarkupContent(55, "<label for=\"star8\" title=\"text\">8 stars</label>\r\n                        ");
            __builder.OpenElement(56, "input");
            __builder.AddAttribute(57, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 32 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
                                         (() => SetChosenRating(7))

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(58, "type", "radio");
            __builder.AddAttribute(59, "id", "star7");
            __builder.AddAttribute(60, "name", "rate");
            __builder.AddAttribute(61, "value", "7");
            __builder.CloseElement();
            __builder.AddMarkupContent(62, "\r\n                        ");
            __builder.AddMarkupContent(63, "<label for=\"star7\" title=\"text\">7 stars</label>\r\n                        ");
            __builder.OpenElement(64, "input");
            __builder.AddAttribute(65, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 34 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
                                         (() => SetChosenRating(6))

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(66, "type", "radio");
            __builder.AddAttribute(67, "id", "star6");
            __builder.AddAttribute(68, "name", "rate");
            __builder.AddAttribute(69, "value", "6");
            __builder.CloseElement();
            __builder.AddMarkupContent(70, "\r\n                        ");
            __builder.AddMarkupContent(71, "<label for=\"star6\" title=\"text\">6 star</label>\r\n                        ");
            __builder.OpenElement(72, "input");
            __builder.AddAttribute(73, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 36 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
                                         (() => SetChosenRating(5))

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(74, "type", "radio");
            __builder.AddAttribute(75, "id", "star5");
            __builder.AddAttribute(76, "name", "rate");
            __builder.AddAttribute(77, "value", "5");
            __builder.CloseElement();
            __builder.AddMarkupContent(78, "\r\n                        ");
            __builder.AddMarkupContent(79, "<label for=\"star5\" title=\"text\">5 stars</label>\r\n                        ");
            __builder.OpenElement(80, "input");
            __builder.AddAttribute(81, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 38 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
                                         (() => SetChosenRating(4))

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(82, "type", "radio");
            __builder.AddAttribute(83, "id", "star4");
            __builder.AddAttribute(84, "name", "rate");
            __builder.AddAttribute(85, "value", "4");
            __builder.CloseElement();
            __builder.AddMarkupContent(86, "\r\n                        ");
            __builder.AddMarkupContent(87, "<label for=\"star4\" title=\"text\">4 stars</label>\r\n                        ");
            __builder.OpenElement(88, "input");
            __builder.AddAttribute(89, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 40 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
                                         (() => SetChosenRating(3))

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(90, "type", "radio");
            __builder.AddAttribute(91, "id", "star3");
            __builder.AddAttribute(92, "name", "rate");
            __builder.AddAttribute(93, "value", "3");
            __builder.CloseElement();
            __builder.AddMarkupContent(94, "\r\n                        ");
            __builder.AddMarkupContent(95, "<label for=\"star3\" title=\"text\">3 stars</label>\r\n                        ");
            __builder.OpenElement(96, "input");
            __builder.AddAttribute(97, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 42 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
                                         (() => SetChosenRating(2))

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(98, "type", "radio");
            __builder.AddAttribute(99, "id", "star2");
            __builder.AddAttribute(100, "name", "rate");
            __builder.AddAttribute(101, "value", "2");
            __builder.CloseElement();
            __builder.AddMarkupContent(102, "\r\n                        ");
            __builder.AddMarkupContent(103, "<label for=\"star2\" title=\"text\">2 stars</label>\r\n                        ");
            __builder.OpenElement(104, "input");
            __builder.AddAttribute(105, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 44 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
                                         (() => SetChosenRating(1))

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(106, "type", "radio");
            __builder.AddAttribute(107, "id", "star1");
            __builder.AddAttribute(108, "name", "rate");
            __builder.AddAttribute(109, "value", "1");
            __builder.CloseElement();
            __builder.AddMarkupContent(110, "\r\n                        ");
            __builder.AddMarkupContent(111, "<label for=\"star1\" title=\"text\">1 star</label>\r\n                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(112, "\r\n\r\n                    ");
            __builder.OpenElement(113, "div");
            __builder.AddAttribute(114, "class", "form-check");
            __builder.AddMarkupContent(115, "\r\n\r\n                        ");
            __builder.OpenElement(116, "input");
            __builder.AddAttribute(117, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 50 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
                                           InsertRating

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(118, "type", "submit");
            __builder.AddAttribute(119, "class", "btn btn-rating float-right");
            __builder.AddAttribute(120, "disabled", 
#nullable restore
#line 50 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
                                                                                                                    isSubmitting

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(121, "\r\n\r\n                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(122, "\r\n                ");
            __builder.CloseElement();
            __builder.AddMarkupContent(123, "\r\n            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(124, "\r\n            ");
            __builder.AddMarkupContent(125, "<div class=\"col-md-8 banner-sec\">\r\n                <img src=\"https://i.ibb.co/x2GnTWj/rating.jpg\" alt=\"First slide\">\r\n            </div>\r\n        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(126, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(127, "\r\n    ");
            __builder.OpenElement(128, "div");
            __builder.AddMarkupContent(129, "\r\n        ");
            __builder.AddContent(130, 
#nullable restore
#line 61 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
         insertRequestMessage

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(131, "\r\n    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(132, "\r\n\r\n");
#nullable restore
#line 64 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
         if (_ratings.Any())
        {

#line default
#line hidden
#nullable disable
            __builder.AddContent(133, "            ");
            __builder.OpenElement(134, "div");
            __builder.AddAttribute(135, "class", "rating-list");
            __builder.AddMarkupContent(136, "\r\n");
#nullable restore
#line 67 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
                 foreach (var rating in _ratings)
                {

#line default
#line hidden
#nullable disable
            __builder.AddContent(137, "                    ");
            __builder.OpenElement(138, "div");
            __builder.AddAttribute(139, "class", "rating-el");
            __builder.AddMarkupContent(140, "\r\n                        ");
            __builder.OpenElement(141, "div");
            __builder.AddAttribute(142, "class", "card-body");
            __builder.AddMarkupContent(143, "\r\n                            ");
            __builder.OpenElement(144, "h5");
            __builder.AddAttribute(145, "class", "movie-title");
            __builder.AddContent(146, 
#nullable restore
#line 71 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
                                                     rating.MovieTitle

#line default
#line hidden
#nullable disable
            );
            __builder.CloseElement();
            __builder.AddMarkupContent(147, "\r\n                            ");
            __builder.OpenElement(148, "p");
            __builder.AddAttribute(149, "class", "rating-info");
            __builder.AddMarkupContent(150, "\r\n                                ");
            __builder.AddMarkupContent(151, "<strong>Your Rating: </strong> ");
            __builder.AddContent(152, 
#nullable restore
#line 73 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
                                                                rating.UserRating

#line default
#line hidden
#nullable disable
            );
            __builder.AddMarkupContent(153, "\r\n                            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(154, "\r\n                            ");
            __builder.OpenElement(155, "button");
            __builder.AddAttribute(156, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 75 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
                                                () => DeleteRating(rating)

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(157, "Delete rating");
            __builder.CloseElement();
            __builder.AddMarkupContent(158, "\r\n                            <br>\r\n                            ");
            __builder.OpenElement(159, "select");
            __builder.AddAttribute(160, "value", Microsoft.AspNetCore.Components.BindConverter.FormatValue(
#nullable restore
#line 77 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
                                           updateRating

#line default
#line hidden
#nullable disable
            ));
            __builder.AddAttribute(161, "onchange", Microsoft.AspNetCore.Components.EventCallback.Factory.CreateBinder(this, __value => updateRating = __value, updateRating));
            __builder.SetUpdatesAttributeName("value");
            __builder.AddMarkupContent(162, "\r\n                                ");
            __builder.OpenElement(163, "option");
            __builder.AddAttribute(164, "value", "10");
            __builder.AddContent(165, "10");
            __builder.CloseElement();
            __builder.AddMarkupContent(166, "\r\n                                ");
            __builder.OpenElement(167, "option");
            __builder.AddAttribute(168, "value", "9");
            __builder.AddContent(169, "9");
            __builder.CloseElement();
            __builder.AddMarkupContent(170, "\r\n                                ");
            __builder.OpenElement(171, "option");
            __builder.AddAttribute(172, "value", "8");
            __builder.AddContent(173, "8");
            __builder.CloseElement();
            __builder.AddMarkupContent(174, "\r\n                                ");
            __builder.OpenElement(175, "option");
            __builder.AddAttribute(176, "value", "7");
            __builder.AddContent(177, "7");
            __builder.CloseElement();
            __builder.AddMarkupContent(178, "\r\n                                ");
            __builder.OpenElement(179, "option");
            __builder.AddAttribute(180, "value", "7");
            __builder.AddContent(181, "7");
            __builder.CloseElement();
            __builder.AddMarkupContent(182, "\r\n                                ");
            __builder.OpenElement(183, "option");
            __builder.AddAttribute(184, "value", "6");
            __builder.AddContent(185, "6");
            __builder.CloseElement();
            __builder.AddMarkupContent(186, "\r\n                                ");
            __builder.OpenElement(187, "option");
            __builder.AddAttribute(188, "value", "5");
            __builder.AddContent(189, "5");
            __builder.CloseElement();
            __builder.AddMarkupContent(190, "\r\n                                ");
            __builder.OpenElement(191, "option");
            __builder.AddAttribute(192, "value", "5");
            __builder.AddContent(193, "5");
            __builder.CloseElement();
            __builder.AddMarkupContent(194, "\r\n                                ");
            __builder.OpenElement(195, "option");
            __builder.AddAttribute(196, "value", "4");
            __builder.AddContent(197, "4");
            __builder.CloseElement();
            __builder.AddMarkupContent(198, "\r\n                                ");
            __builder.OpenElement(199, "option");
            __builder.AddAttribute(200, "value", "3");
            __builder.AddContent(201, "3");
            __builder.CloseElement();
            __builder.AddMarkupContent(202, "\r\n                                ");
            __builder.OpenElement(203, "option");
            __builder.AddAttribute(204, "value", "2");
            __builder.AddContent(205, "2");
            __builder.CloseElement();
            __builder.AddMarkupContent(206, "\r\n                                ");
            __builder.OpenElement(207, "option");
            __builder.AddAttribute(208, "value", "1");
            __builder.AddContent(209, "1");
            __builder.CloseElement();
            __builder.AddMarkupContent(210, "\r\n                            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(211, "\r\n                            ");
            __builder.OpenElement(212, "button");
            __builder.AddAttribute(213, "onclick", Microsoft.AspNetCore.Components.EventCallback.Factory.Create<Microsoft.AspNetCore.Components.Web.MouseEventArgs>(this, 
#nullable restore
#line 91 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
                                              (() => UpdateRating(rating))

#line default
#line hidden
#nullable disable
            ));
            __builder.AddContent(214, "Update rating");
            __builder.CloseElement();
            __builder.AddMarkupContent(215, "\r\n                        ");
            __builder.CloseElement();
            __builder.AddMarkupContent(216, "\r\n                    ");
            __builder.CloseElement();
            __builder.AddMarkupContent(217, "\r\n");
#nullable restore
#line 94 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
                }

#line default
#line hidden
#nullable disable
            __builder.AddContent(218, "            ");
            __builder.CloseElement();
            __builder.AddMarkupContent(219, "\r\n");
#nullable restore
#line 96 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
        }

        else if (isLoaded == true)
        {

#line default
#line hidden
#nullable disable
            __builder.AddContent(220, "            ");
            __builder.AddMarkupContent(221, "<p>No Ratings Found</p>\r\n");
#nullable restore
#line 101 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
        }

#line default
#line hidden
#nullable disable
            __builder.AddMarkupContent(222, "\r\n");
            __builder.CloseElement();
        }
        #pragma warning restore 1998
#nullable restore
#line 105 "C:\Users\Teodora\Desktop\.Net-Project-FII\FE\FE\Pages\Ratings .razor"
       

    private List<Movie> movies = new List<Movie>();

    private async Task GetMovies() => movies = await Http.GetFromJsonAsync<List<Movie>>("https://localhost:44385/movies");

    List<RatingEntry> _ratings = new List<RatingEntry>();
    private bool isLoaded;
    private Movie chosenMovie;
    private string chosenMovieTitle;
    private int chosenRating;
    private int updateRating = 0;
    private string insertRequestMessage;

    bool isSubmitting;


    protected override async Task OnInitializedAsync()
    {
        await GetMovies();
        await GetUserRatings();
    }

    private void SetChosenRating(int rating)
    {
        chosenRating = rating;
        Console.WriteLine(chosenRating);
    }

    private async Task InsertRating()
    {
        isSubmitting = true;
        string userId = await localStore.GetItemAsync<string>("userId");
        string token = await localStore.GetItemAsync<string>("token");
        Http.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Bearer", token);
        try
        {
            chosenMovie = await Http.GetFromJsonAsync<Movie>("https://localhost:44385/movies/title/" + chosenMovieTitle);
            RatingEntry ratingEntry = new RatingEntry
            {
                UserId = userId,
                MovieId = chosenMovie.Id,
                UserRating = chosenRating,
                Rated = chosenMovie.Rating,
                MovieTitle = chosenMovie.Title,
                Votes = chosenMovie.Votes
            };
            var response = await Http.PostAsJsonAsync("https://localhost:44385/rating", ratingEntry);
            insertRequestMessage = "The rating was added to your list!";
        }
        catch(Exception ex)
        {
            insertRequestMessage = "This movie wasn't found in our database! Check on the 'Movies' page to see the title available on our website!";
        }
        await GetUserRatings();
        isSubmitting = false;
    }

    private async Task DeleteRating(RatingEntry rating)
    {
        string userId = await localStore.GetItemAsync<string>("userId");
        string token = await localStore.GetItemAsync<string>("token");
        Http.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Bearer", token);
        await Http.DeleteAsync("https://localhost:44385/rating/"+ rating.Id);
        _ratings.Remove(rating);
    }

    private async Task UpdateRating(RatingEntry rating)
    {
        string userId = await localStore.GetItemAsync<string>("userId");
        string token = await localStore.GetItemAsync<string>("token");
        Http.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Bearer", token);
        RatingEntry updatedRatingEntry = rating;
        updatedRatingEntry.UserRating = updateRating;
        var response = await Http.PutAsJsonAsync("https://localhost:44385/rating/" + rating.Id, updatedRatingEntry);
        _ratings[_ratings.FindIndex(r => r.Equals(rating))] = updatedRatingEntry;
    }

    private async Task GetUserRatings()
    {
        isLoaded = false;
        string userId = await localStore.GetItemAsync<string>("userId");
        string token = await localStore.GetItemAsync<string>("token");

        Http.DefaultRequestHeaders.Authorization = new AuthenticationHeaderValue("Bearer", token);
        _ratings = await Http.GetFromJsonAsync<List<RatingEntry>>("https://localhost:44385/rating/user/" + userId);
        isLoaded = true;
    }


#line default
#line hidden
#nullable disable
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private ILocalStorageService localStore { get; set; }
        [global::Microsoft.AspNetCore.Components.InjectAttribute] private HttpClient Http { get; set; }
    }
}
#pragma warning restore 1591
